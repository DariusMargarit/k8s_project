import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '30s', target: 5 },
    { duration: '30s', target: 10 },
    { duration: '30s', target: 20 },
    { duration: '30s', target: 0 },
  ],
};

export default function () {
  let url = 'http://frontend.default.127.0.0.1.sslip.io/api/predict';

  let payload = JSON.stringify({
    imageData: "data:image/png;base64,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" // Put the real base64 image data here
  });

  let params = {
    headers: {
      'Content-Type': 'application/json',
    },
  };

  let res = http.post(url, payload, params);

  check(res, { 'status is 200': (r) => r.status === 200 });
  sleep(1);
}
